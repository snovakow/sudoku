"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[506],{506:(t,e,o)=>{o.r(e);class n extends Uint8Array{constructor(){super(81)}getSymbol(t,e){return this[9*t+e]}setSymbol(t,e,o){this[9*t+e]=o}toData(){let t="";for(let e=0;e<81;e++)t+=this[e];return t}fromData(t){for(let e=0;e<81;e++)this[e]=parseInt(t[e])}}const l=document.createElement("canvas"),i=document.createElement("canvas");l.style.position="fixed",l.style.width="192px",l.style.height="192px",l.style.bottom="0px",l.style.left="0px",i.style.position="fixed",i.style.width="192px",i.style.height="192px",i.style.bottom="0px",i.style.right="0px";const s=t=>Math.round(t)+.5,r=(t,e)=>{e.width=192*window.devicePixelRatio,e.height=192*window.devicePixelRatio;const o=[[1,2,3],[4,5,6],[7,8,9]],n=e.width,l=n/3,i=l,r=.5*l,c=e.getContext("2d");c.clearRect(0,0,e.width,e.height),c.lineWidth=2*window.devicePixelRatio,c.beginPath();for(let t=0;t<=n;t+=i){const e=s(t);c.moveTo(e,0),c.lineTo(e,n),c.moveTo(0,e),c.lineTo(n,e)}c.stroke(),c.strokeStyle="black",c.font=t,c.textAlign="center",c.textBaseline="bottom",c.fillStyle="black";const a=c.measureText("0");let d=r;for(let t=0;t<3;t++,d+=i){let e=r;for(let n=0;n<3;n++,e+=i)c.fillText(o[t][n],s(e),s(d+(.5*a.actualBoundingBoxAscent-.5*a.actualBoundingBoxDescent)))}},c=[],a=document.createElement("canvas"),d="Hauss,sans-serif",f=new class{constructor(){this.canvas=a,this.grid=new n,this.startGrid=new n}setGrid(t){for(let e=0;e<9;e++){const o=t[e];for(let t=0;t<9;t++)this.startGrid[9*e+t]=o[t]}this.grid.set(this.startGrid)}resetGrid(){this.grid.set(this.startGrid)}hitDetect(t,e,o){const n=o-8,l=Math.floor((e-4)/n*9),i=Math.floor((t-4)/n*9);return l<0||i<0||l>=9||i>=9?[-1,-1]:[l,i]}draw(t,e,o){const n=a.getContext("2d");n.fillStyle="white",n.fillRect(0,0,a.width,a.height),n.strokeStyle="black";const l=a.width,i=l-8*window.devicePixelRatio,r=i/3,f=i/9;let h;t&&(n.fillStyle="cyan",n.fillRect(s(i*o/9)+1*window.devicePixelRatio,s(i*e/9)+1*window.devicePixelRatio,s(f),s(f))),n.beginPath(),n.lineWidth=8*window.devicePixelRatio,h=4*window.devicePixelRatio;for(let t=0;t<=3;t++,h+=r){const t=s(h);n.moveTo(t,0),n.lineTo(t,l),n.moveTo(0,t),n.lineTo(l,t)}n.stroke(),n.beginPath(),n.lineWidth=2*window.devicePixelRatio,h=4*window.devicePixelRatio+f;const u=2*f;for(let t=0;t<3;t++,h+=u){const t=.5;let e=Math.round(h)+t;n.moveTo(e,0),n.lineTo(e,l),n.moveTo(0,e),n.lineTo(l,e),h+=f,e=Math.floor(h)+t,n.moveTo(e,0),n.lineTo(e,l),n.moveTo(0,e),n.lineTo(l,e)}n.stroke(),n.textAlign="center",n.textBaseline="bottom",n.fillStyle="black";let g=null,m=null;h=4*window.devicePixelRatio+.5*f;let p=h;for(let t=0;t<9;t++,p+=f){let e=h;for(let o=0;o<9;o++,e+=f){const l=c[9*t+o];let i=0;if(l)for(let t=0;t<9;t++)l[t]&&i++;if(i>0){n.font="100 "+s(.7*f*1/3)+"px "+d,m||(m=n.measureText("0"));for(let t=0;t<3;t++)for(let o=0;o<3;o++)if(l[3*o+t]){const l=e+f*(t-1)/3*1,i=p+(.5*m.actualBoundingBoxAscent-.5*m.actualBoundingBoxDescent)+f*(o-1)/3*1,s=3*o+t+1;n.fillText(s,l,i)}}else{n.font="100 "+s(.7*f)+"px "+d,g||(g=n.measureText("0"));const l=this.grid.getSymbol(t,o);if(0===l)continue;const i=e,r=p+(.5*g.actualBoundingBoxAscent-.5*g.actualBoundingBoxDescent);n.fillText(l,s(i),s(r))}}}}},h=(t,e)=>{for(let o=0;o<81;o++)if(0===t[o]){const t=e[o];if(t)for(let e=0;e<9;e++)!1!==t[e]&&(t[e]=!0);else e[o]=[!0,!0,!0,!0,!0,!0,!0,!0,!0]}for(let o=0;o<9;o++)for(let n=0;n<9;n++){if(t.getSymbol(o,n)>0)continue;const l=e[9*o+n];if(l)for(let e=0;e<9;e++){const i=t.getSymbol(o,e),s=t.getSymbol(e,n),r=3*Math.floor(o/3),c=3*Math.floor(n/3),a=t.getSymbol(r+Math.floor(e/3),c+e%3);i>0&&(l[i-1]=!1),s>0&&(l[s-1]=!1),a>0&&(l[a-1]=!1)}}},u=(t,e)=>{for(let o=0;o<81;o++)if(0===t[o]){let n=-1;const l=e[o];if(!l)continue;for(let t=0;t<9;t++)if(l[t]){if(-1!==n){n=-1;break}n=t}if(n>=0)return delete e[o],t[o]=n+1,!0}return!1};class g{static rowLoc(t,e){return 9*t+e}static colLoc(t,e){return 9*e+t}static boxLoc(t,e){return 9*(3*Math.floor(t/3)+Math.floor(e/3))+(t%3*3+e%3)}constructor(t){this.group=t}getRow(t,e){return this.group[9*t+e]}setRow(t,e,o){this.group[9*t+e]=o}getCol(t,e){return this.group[9*e+t]}setCol(t,e,o){this.group[9*e+t]=o}getBox(t,e){const o=3*Math.floor(t/3)+Math.floor(e/3),n=t%3*3+e%3;return this.group[9*o+n]}}const m=(t,e)=>{const o=new g(e);class n{constructor(t,e){this.group=t,this.loc=e}}const l=[new n("getRow","rowLoc"),new n("getCol","colLoc"),new n("getBox","boxLoc")];for(const n of l){const l=n.group,i=n.loc;for(let n=0;n<9;n++)for(let s=0;s<9;s++){let r=-1;for(let t=0;t<9;t++){const e=o[l](s,t);if(e&&e[n]){if(-1!==r){r=-1;break}r=t}}if(-1!==r){const o=g[i](s,r);return t[o]=n+1,delete e[o],!0}}}return!1};class p{constructor(t,e){this.index=t,this.set=e}}const y=t=>{const e=new g(t),o=new Set,n=["getRow","getCol","getBox"];for(const t of n)for(let n=0;n<9;n++){const l=[];for(let o=0;o<9;o++){const i=e[t](n,o);if(!i)continue;const s=new Set;for(let t=0;t<9;t++)i[t]&&s.add(t);s.size>0&&l.push(new p(o,s))}const i=l.length;for(let s=0;s<i-1;s++){const r=i-s-1,c=l[s],a=1<<r;for(let r=1;r<a;r++){o.clear();for(const t of c.set)o.add(t);let a=1,d=1<<s,f=1;for(let t=s+1;t<i;t++){if((r&f)>0){const e=l[t];for(const t of e.set)o.add(t);a++,d|=1<<t}f<<=1}let h=!1;if(a===o.size&&a<l.length)for(let s=0;s<i;s++){if((d&1<<s)>0)continue;const i=l[s],r=e[t](n,i.index);if(r)for(const t of o)r[t]&&(r[t]=!1,h=!0)}if(h)return!0}}}return!1};let x=0,w=0,b=!1;document.body.appendChild(l),document.body.appendChild(i),document.body.style.userSelect="none";const v=()=>{var t;f.draw(b,x,w),t="100 "+s(64*window.devicePixelRatio)+"px "+d,r(t,l),r(t,i)},S=()=>{localStorage.setItem("startGrid",f.startGrid.toData()),localStorage.setItem("grid",f.grid.toData()),localStorage.setItem("markers",JSON.stringify(c))},T=[[[0,4,0,3,6,7,0,0,0],[0,1,0,0,8,0,0,6,0],[6,0,0,0,4,0,0,0,2],[0,0,3,8,2,0,9,0,6],[0,8,4,0,0,0,2,5,3],[0,0,6,0,0,0,8,0,0],[4,0,0,0,9,0,0,0,5],[0,5,0,0,7,0,0,9,0],[0,0,0,6,5,8,0,2,0]],[[0,0,0,0,4,0,2,0,0],[2,0,0,0,0,0,6,5,0],[9,0,0,6,0,0,0,0,7],[0,0,0,7,6,3,0,0,0],[0,0,0,0,5,0,0,0,1],[0,0,0,2,1,4,0,0,0],[8,0,0,1,0,7,0,0,4],[0,3,6,0,0,0,0,0,8],[0,0,2,0,3,0,0,0,0]],[[9,0,0,0,0,0,0,0,5],[0,6,0,0,7,0,0,0,0],[0,0,2,0,0,8,4,9,0],[0,0,0,0,0,0,0,1,0],[0,0,9,0,0,4,3,8,0],[2,0,0,9,0,0,0,0,0],[0,0,3,0,0,0,0,0,1],[7,0,0,0,8,0,5,3,0],[0,0,0,0,0,5,0,0,2]],[[1,0,0,0,6,0,0,0,0],[0,0,3,9,0,1,0,4,0],[2,0,0,0,0,0,0,0,7],[0,0,0,0,8,0,0,5,0],[0,0,6,0,4,0,0,0,0],[3,0,0,5,0,6,2,0,0],[0,0,1,3,0,5,0,9,0],[0,0,0,8,0,0,0,0,0],[0,9,0,0,0,0,4,0,0]],[[7,0,0,9,0,0,6,0,0],[0,5,0,8,0,0,0,3,7],[0,0,0,0,3,0,4,0,0],[0,0,2,5,0,0,0,0,0],[0,0,0,0,0,0,3,0,0],[4,0,0,0,8,0,0,1,9],[0,4,0,0,0,9,0,0,0],[9,0,0,0,1,0,0,7,8],[0,0,0,0,0,0,0,0,6]],[[6,0,7,9,0,1,3,0,0],[9,0,3,0,7,0,0,0,0],[0,5,0,0,3,0,0,0,0],[0,0,0,1,2,0,6,8,0],[0,0,2,5,8,9,0,0,0],[5,0,0,0,0,0,0,0,0],[3,0,0,0,0,7,9,0,6],[0,0,0,0,6,0,4,0,0],[7,0,0,3,0,0,8,0,0]],[[0,5,0,0,2,0,0,0,0],[0,0,0,6,0,0,1,0,0],[0,8,3,0,0,4,0,0,6],[0,3,9,0,8,0,7,0,0],[5,0,0,0,0,0,0,0,3],[1,0,0,0,0,9,0,0,0],[0,6,4,0,0,8,0,0,1],[9,0,0,0,0,0,0,0,0],[0,0,0,0,7,0,0,2,0]]];(()=>{const t=localStorage.getItem("startGrid");if(t){f.startGrid.fromData(t);const e=localStorage.getItem("grid");e&&f.grid.fromData(e);const o=localStorage.getItem("markers");if(o){const t=JSON.parse(o);c.length=0;for(const e in t)c[e]=t[e]}return!0}return!1})()||f.setGrid(T[0]),document.body.appendChild(f.canvas),f.canvas.addEventListener("click",(t=>{const e=t.target.getBoundingClientRect(),o=t.clientX-e.left,n=t.clientY-e.top,[l,i]=f.hitDetect(o,n,e.width);l<0||i<0||0===f.startGrid.getSymbol(l,i)&&(b&&x===l&&w===i?b=!1:(x=l,w=i,b=!0),v())}));const k=t=>{const e=t.target.getBoundingClientRect(),o=t.clientX-e.left,n=t.clientY-e.top,l=e.width;return[Math.floor(n/l*3),Math.floor(o/l*3)]};l.addEventListener("click",(t=>{if(!b)return;const[e,o]=k(t),n=3*e+o+1;f.grid.getSymbol(x,w)==n?f.grid.setSymbol(x,w,0):(delete c[9*x+w],f.grid.setSymbol(x,w,n),S()),v()})),i.addEventListener("click",(t=>{if(!b)return;const[e,o]=k(t),n=3*e+o;let l=c[9*x+w];l||(l=[],c[9*x+w]=l),l[n]=!l[n],v()})),window.addEventListener("focus",(()=>{console.log("onFocus"),v()})),window.addEventListener("blur",(()=>{})),addEventListener("orientationchange",(t=>{v(),console.log(t)}));const R=((t,e)=>{const o=document.createElement("select");for(const e of t){const t=document.createElement("option");t.text=e,o.appendChild(t)}return o.addEventListener("change",(()=>{(t=>{0!==t.selectedIndex&&(c.length=0,f.setGrid(T[t.selectedIndex-1]),S(),v())})(o)})),document.body.appendChild(o),document.body.appendChild(document.createElement("br")),o})(["-",...T.keys()]);R.style.position="absolute";const C=document.createElement("button");C.appendChild(document.createTextNode("X")),C.style.position="absolute",C.style.width="32px",C.style.height="32px",C.addEventListener("click",(()=>{c.length=0,f.resetGrid(),S(),v()})),document.body.appendChild(C);const E=document.createElement("button");E.appendChild(document.createTextNode("+")),E.style.position="absolute",E.style.width="32px",E.style.height="32px",E.addEventListener("click",(()=>{const t=performance.now();let e=0,o=0,n=0,l=!1;do{h(f.grid,c),l=u(f.grid,c),l?e++:(l=m(f.grid,c),l?(o++,e++):(l=y(c),l&&n++))}while(l);const i=performance.now();console.log("---"),console.log("Removals: "+e),console.log("Missing Singles: "+o),console.log("Marker Reductions: "+n),console.log("Time: "+(i-t)/1e3),v()})),document.body.appendChild(E);const B=document.createElement("button");B.appendChild(document.createTextNode("x")),B.style.position="absolute",B.style.width="32px",B.style.height="32px",B.addEventListener("click",(()=>{h(f.grid,c),v()})),document.body.appendChild(B),R.style.transform="translateX(-50%)",C.style.transform="translateX(-50%)",B.style.transform="translateX(-50%)",E.style.transform="translateX(-50%)",E.style.touchAction="manipulation",f.canvas.style.position="absolute",f.canvas.style.left="50%",f.canvas.style.touchAction="manipulation",l.style.touchAction="manipulation",i.style.touchAction="manipulation";const M=()=>{let t=window.innerWidth,e=window.innerHeight;t-192>e?(t-e<384&&(t-=384),f.canvas.style.top="0%",f.canvas.style.transform="translate(-50%, 0%)",E.style.bottom="320px",E.style.left="96px",B.style.bottom="280px",B.style.left="96px",R.style.bottom="240px",R.style.left="96px",C.style.bottom="200px",C.style.left="96px"):(f.canvas.style.top=e-t<192?"0%":.5*(e-192-t)+"px",e-t<384&&(e-=192),f.canvas.style.transform="translate(-50%, 0%)",B.style.bottom="128px",B.style.left="50%",E.style.bottom="88px",E.style.left="50%",R.style.bottom="48px",R.style.left="50%",C.style.bottom="8px",C.style.left="50%");const o=Math.min(t,e);f.canvas.style.width=o+"px",f.canvas.style.height=o+"px",f.canvas.width=2*Math.floor(o*window.devicePixelRatio/1),f.canvas.height=2*Math.floor(o*window.devicePixelRatio/1),v()};M(),window.addEventListener("resize",M)}}]);